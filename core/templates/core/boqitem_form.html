{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<h1 class="h3 mb-4">{{ title }}</h1>
<form method="post" novalidate>
    {% csrf_token %}
    {% if form.non_field_errors %}
        <div class="alert alert-danger">{{ form.non_field_errors|join:' ' }}</div>
    {% endif %}
    <div class="row g-3 mb-4">
        <div class="col-md-4">
            <label class="form-label" for="id_project">Projekat</label>
            {{ form.project }}
            {% if form.project.errors %}
                <div class="invalid-feedback d-block">{{ form.project.errors|join:', ' }}</div>
            {% endif %}
        </div>
        <div class="col-md-4">
            <label class="form-label" for="id_category">Kategorija</label>
            {{ form.category }}
            {% if form.category.errors %}
                <div class="invalid-feedback d-block">{{ form.category.errors|join:', ' }}</div>
            {% elif form.category.field.queryset.count == 0 %}
                <div class="form-text">Nema definisanih kategorija za izabrani projekat.</div>
            {% endif %}
        </div>
        <div class="col-md-2">
            <label class="form-label" for="id_code">Šifra</label>
            {{ form.code }}
            {% if form.code.errors %}
                <div class="invalid-feedback d-block">{{ form.code.errors|join:', ' }}</div>
            {% endif %}
        </div>
        <div class="col-md-6">
            <label class="form-label" for="id_title">Naziv</label>
            {{ form.title }}
            {% if form.title.errors %}
                <div class="invalid-feedback d-block">{{ form.title.errors|join:', ' }}</div>
            {% endif %}
        </div>
        <div class="col-md-3">
            <label class="form-label" for="id_uom">JM</label>
            {{ form.uom }}
            {% if form.uom.errors %}
                <div class="invalid-feedback d-block">{{ form.uom.errors|join:', ' }}</div>
            {% endif %}
        </div>
        <div class="col-md-3">
            <label class="form-label" for="id_contract_qty">Ugovorena količina</label>
            {{ form.contract_qty }}
            {% if form.contract_qty.errors %}
                <div class="invalid-feedback d-block">{{ form.contract_qty.errors|join:', ' }}</div>
            {% endif %}
        </div>
        <div class="col-md-3">
            <label class="form-label" for="id_unit_price">Jedinična cena</label>
            {{ form.unit_price }}
            {% if form.unit_price.errors %}
                <div class="invalid-feedback d-block">{{ form.unit_price.errors|join:', ' }}</div>
            {% endif %}
        </div>
        <div class="col-md-3">
            <label class="form-label" for="id_closed_at">Datum zatvaranja</label>
            {{ form.closed_at }}
            {% if form.closed_at.errors %}
                <div class="invalid-feedback d-block">{{ form.closed_at.errors|join:', ' }}</div>
            {% endif %}
        </div>
        <div class="col-12">
            <label class="form-label" for="id_close_note">Napomena</label>
            {{ form.close_note }}
            {% if form.close_note.errors %}
                <div class="invalid-feedback d-block">{{ form.close_note.errors|join:', ' }}</div>
            {% endif %}
        </div>
    </div>
    <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary">Sačuvaj</button>
        <a class="btn btn-outline-secondary" href="{% url 'core:boqitem-list' %}">Otkaži</a>
    </div>
</form>
{% endblock %}
