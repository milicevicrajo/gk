{% extends "base.html" %}
{% load static %}

{% block extra_css %}
  {{ block.super }}
  <!-- Tema za Select2 koja prati Bootstrap 5 izgled (preporuka) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css">
  {{ filter.form.media.css }}  {# django-select2 CSS #}
{% endblock %}

{% block extra_js %}
  {{ block.super }}
  {{ filter.form.media.js }}   {# django-select2 JS + auto-init #}
{% endblock %}

{% block content %}

<form method="get" class="row g-2 align-items-end mb-4">
  <div class="col-md-3">
    <label class="form-label" for="{{ filter.form.project.id_for_label }}">{{ filter.form.project.label }}</label>
    {{ filter.form.project }}
  </div>
  <div class="col-md-4">
    <label class="form-label" for="{{ filter.form.boq.id_for_label }}">{{ filter.form.boq.label }}</label>
    {{ filter.form.boq }}
  </div>
  <div class="col-auto">
    <button type="submit" class="btn btn-outline-primary">Filtriraj</button>
  </div>
  {% if request.GET.project or request.GET.boq %}
    <div class="col-auto">
      <a class="btn btn-outline-secondary" href="{% url 'core:sheet-list' %}">Reset</a>
    </div>
  {% endif %}
</form>

{# Primer tabele #}
<table class="table table-sm align-middle">
  <thead>
    <tr>
      <th>Proj</th>
      <th>BoQ</th>
      <th>Å ifra</th>
      <th>Seq</th>
      <th>Opis</th>
      <th>...</th>
    </tr>
  </thead>
  <tbody>
  {% for s in sheets %}
    <tr>
      <td>{{ s.project.name }}</td>
      <td>{{ s.boq_item.title }}</td>
      <td>{{ s.boq_item.code }}</td>
      <td>{{ s.seq_no }}</td>
      <td class="text-truncate" style="max-width: 360px;" title="{{ s.boq_item.title }}">{{ s.boq_item.title }}</td>
      <td>...</td>
    </tr>
  {% empty %}
    <tr><td colspan="6" class="text-muted">Nema podataka za zadati filter.</td></tr>
  {% endfor %}
  </tbody>
</table>

{% endblock %}
